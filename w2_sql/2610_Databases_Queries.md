# 26/10/2020

**Topics covered**
- Databases
- Queries

## Databases

**What is a Database?**
A location to gather information. A structured set of data held in a computer.

We must be able to structure tables to contain the right type of info, so that we can query it.

**DBMS** - Database Management System, allows a computer to perform DB functions of storing, retrieving, adding, deleting, and modifying data.

Relational Databases contain connected data, tables should be related.

Types of DB
- Flat-file: Stores everything in one table, good for small numbers of records related to a single topic
- Relational DB: Gives ability to separate masses of data into numerous tables, linked to each other through use of keys.
- Big Data: Used for IoT

Relationship Types
- One to One: Each row in table A linked to no more than one row in table B, this is an attribute of relationship not tables
- One to Many: Each row in table can be related to many rows in relating table, allows frequentyl used info to be saved only once and referenced many times in all other tables.
- Many to Many: One or more rows in a table can be related to 0, 1, or many rows in another table. 3rd table called a mapping or link table required in order to implement such a relationship, e.g. customers can purchase many products.

Relationships can be shown with a **E**ntity **R**elationship **D**iagram

**Primary Key**
- Uniquely identifies each record in the table
- Most tables should have a primary key
- Each table can have more than one column which is part of its primary key (composite key) e.g. order no. + order line no.
- Either an attribute that is unique (e.g. NI number) or generated by DBMS
- DBMS will enforce uniqueness of primary key, not allowing repeated records to exist in the table
- Must be unique, cannot be null/blank, value must never change, and each table can only have one primary key column

**Foreign Key**: Primary key that exists in a separate table, builds relationship to primary table.


### Designing A Database

DB Tools
- Access: Microsoft product for DB
- SQL Server: Also MS
- PostgreSQL: Open source
- SQLite
- MySQL
- Redis
- mongoDB
- Oracle



## SQL

**S**tructured **Q**uery **L**anguage

**D**ata **M**anipulation **L**anguage
- SELECT
- INSERT
- UPDATE
- DELETE

**D**ata **D**efinition **L**anguage
- CREATE
- ALTER
- DROP
- TRUNCATE

**D**ata **C**ontrol **L**anguage
- GRANT
- REVOKE

**T**ransaction **C**ontrol **L**anguage
- COMMIT
- ROLLBACK
- SAVEPOINT

### Creating a DB

```
CREATE DATABASE db_name;
```

Then use to create table
```
USE db_name;
CREATE TABLE table_name(
	col1 VARCHAR(10),
	col2 VARCHAR(6),
)
```
- VARCHAR(N): Datatype,  Variable Character, each entry can have max N characters

``-- double dash to make a comment``

``SP_HELP table_name`` to see table info

**Data Types**
- VARCHAR: Adaptable to different lengths of characters
- CHARACTER or CHAR: Data must be at a fixed length, fixed amount of space used
- INT: Holds integer value (also bigint/smallint/tinyint)
- DATE/TIME/DATETIME: Stores date/time
- DECIMAL/NUMERIC: Fixed precision and scale (digits to right of decimal point)
- BINARY: Used to store binary data such as an image or file
- FLOAT: Scientific use (very large numbers)
- BIT: Equivalent to binary (0,1, or NULL)

``DROP TABLE table_name`` to delete table

To add a new column
```
ALTER TABLE table_name
ADD new_column datatype;
```

Changing column properties (to not accept null values) 
```
ALTER TABLE table_name
ALTER COLUMN column_name VARCHAR(N) NOT NULL;
```
### Inserting Data

Insert entry

```
INSERT INTO table_name
(
	col1, col2
)
VALUES
(
	'val1', 'val2'
);
```
- If columns aren't specified then it assumes same order as in table.
- VARCHAR, CHAR, and DATE all use quotes, FLOAT and INT don't need quotes.
- Specifying NOT NULL ensures that value is specified for an entry
- Can assign DEFAULT values if not specified
- Can use IDENTITY PRIMARY KEY to automatically create an incrementing id for each entry


### Update and Delete

Updating values
```
UPDATE table name
	SET value  = 1
	WHERE value = 2
```

Deleting values
```
DELETE FROM table_name
WHERE value = 1;
```
